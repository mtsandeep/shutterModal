/*Shutter Modal js - Copyright (c) 2015 Sandeep MT - http://mtsandeep.com */
(function(a){a.fn.extend({shutterModal:function(g){g=a.extend({background:"rgba(0,0,0,0.8)",zIndex:99,url:"",easing:"swing",duration:1E3,showAfter:0,hideAfter:0,close:!0,escClose:!0,remove:!1,onLoad:function(){},onClose:function(){}},g);return this.each(function(){function k(){b.close&&(e.children(".shutter-close").length?e.children(".shutter-close").show():e.prepend('<a class="shutter-close" href="#">X</a>'));a("body").data("orig-style",a("body").attr("style"));a("body").css("overflow","hidden");h();a("#shutter-cover").animate({marginTop:0},b.duration,b.easing,function(){b.onLoad(e)})}function h(){var c=a(window).height(),d=c-a("#shutter-content").outerHeight(!0);a("#shutter-cover").css({height:c});a("#shutter-content").outerHeight(!0)<=c?a("#shutter-content").css("position","absolute").css({top:d/2,left:a("#shutter-content").width()<=a(window).width()?(a(window).width()-a("#shutter-content").width())/2:0,"z-index":b.zIndex+9}):a("#shutter-content").removeAttr("style").css({"z-index":b.zIndex+9})}function f(){a(window).unbind("resize.shutter");a(document).unbind("keyup.shutter");a("#shutter-cover").animate({marginTop:-a(window).height()},b.duration,b.easing,function(){b.onClose(e);a("#shutter-cover").remove();a("body").removeAttr("style").attr("style",a("body").data("orig-style"))})}var b=g,l='<div id="shutter-cover" style="position:fixed;top:0;left:0;width:100%;background:'+b.background+";z-index:"+b.zIndex+";margin-top:-"+a(window).height()+'px;overflow:auto;"></div>',e=function(c){a("body").append(l);var d=a('<div id="shutter-content"></div>');b.url?(a("body").find("#shutter-cover").html(d),a.get(b.url,function(b){a("body").find("#shutter-content").append(b).addClass("shutter");h()})):(c=d.html(c.clone().show()),c.addClass("shutter"),a("body").find("#shutter-cover").html(c));return a("body").find("#shutter-content")}(a(this));b.showAfter?setTimeout(function(){k()},b.showAfter):k();b.hideAfter?setTimeout(function(){f()},b.showAfter+b.hideAfter):b.remove&&f();b.escClose&&a(document).bind("keyup.shutter",function(a){27==a.which&&f()});e.delegate(".shutter-close","click",function(a){a.preventDefault();f()});(function(b,d){a(window).bind("resize.shutter",function(){clearTimeout(d);d=setTimeout(b,50)})})(function(){h()})})}})})(jQuery);
