/*Shutter Modal js - Copyright (c) 2015 Sandeep MT - http://mtsandeep.com */
(function(a){a.fn.extend({shutterModal:function(f){f=a.extend({background:"rgba(0,0,0,0.8)",zIndex:99,url:"",easing:"swing",duration:1E3,showAfter:0,hideAfter:0,close:!0,escClose:!0,remove:!1,onLoad:function(){},onClose:function(){}},f);return this.each(function(){function h(){b.close&&(c.children(".shutter-close").length?c.children(".shutter-close").show():c.prepend('<a class="shutter-close" href="#">X</a>'));a("body").data("orig-style",a("body").attr("style"));a("body").css("overflow","hidden");g();a("#shutter-cover").animate({marginTop:0},b.duration,b.easing,function(){b.onLoad(c)})}function g(){var d=a(window).height(),k=d-a("#shutter-content").outerHeight(!0),c=d-a("#shutter-content").outerWidth(!0);a("#shutter-cover").css({height:d});a("#shutter-content").outerHeight(!0)<=d?a("#shutter-content").css({position:"absolute",top:k/2,left:c/2,"z-index":b.zIndex+9}):a("#shutter-content").removeAttr("style").css({"z-index":b.zIndex+9})}function e(){a(window).unbind("resize.shutter");a(document).unbind("keyup.shutter");a("#shutter-cover").animate({marginTop:-a(window).height()},b.duration,b.easing,function(){b.onClose(c);a("#shutter-cover").remove();a("body").removeAttr("style").attr("style",a("body").data("orig-style"))})}var b=f,l='<div id="shutter-cover" style="position:fixed;top:0;left:0;width:100%;background:'+b.background+";z-index:"+b.zIndex+';margin-top:-100%;overflow:auto;"></div>',c=function(d){a("body").append(l);var c=a('<div id="shutter-content"></div>');b.url?(a("body").find("#shutter-cover").html(c),a.get(b.url,function(b){a("body").find("#shutter-content").append(b).addClass("shutter");g()})):(d=c.html(d.clone().show()),d.addClass("shutter"),a("body").find("#shutter-cover").html(d));return a("body").find("#shutter-content")}(a(this));b.showAfter?setTimeout(function(){h()},b.showAfter):h();b.hideAfter?setTimeout(function(){e()},b.showAfter+b.hideAfter):b.remove&&e();b.escClose&&a(document).bind("keyup.shutter",function(a){27==a.which&&e()});c.delegate(".shutter-close","click",function(a){a.preventDefault();e()});(function(b,c){a(window).bind("resize.shutter",function(){clearTimeout(c);c=setTimeout(b,50)})})(function(){g()})})}})})(jQuery);